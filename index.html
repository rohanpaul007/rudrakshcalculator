<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Harmony Calculator - Rudraksha & Gems</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --bg: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            --card: rgba(255, 255, 255, 0.08);
            --accent: #7c4dff;
            --secondary: #5e35b1;
            --muted: #b8c1ec;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --text: #ffffff;
        }

        body {
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: gradientShift 15s ease infinite;
            background-size: 200% 200%;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .container {
            max-width: 1200px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            width: 100%;
            animation: fadeInDown 0.8s ease;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ff9a9e, #fad0c4, #fad0c4, #a1c4fd);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .tagline {
            font-size: 1.2rem;
            color: var(--muted);
            margin-bottom: 20px;
        }

        .app-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            width: 100%;
        }

        .input-section {
            flex: 1;
            min-width: 300px;
            background: var(--card);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 0.8s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-section {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            background: var(--card);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--muted);
        }

        input, select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(124, 77, 255, 0.3);
        }

        .btn {
            background: linear-gradient(135deg, var(--accent), var(--secondary));
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
            box-shadow: 0 4px 15px rgba(124, 77, 255, 0.4);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(124, 77, 255, 0.6);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .results-placeholder {
            text-align: center;
            color: var(--muted);
            padding: 40px 20px;
        }

        .results-placeholder i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.2);
        }

        .result-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border-left: 4px solid var(--accent);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .result-card::before {
            content: 'üïâÔ∏è';
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 48px;
            opacity: 0.1;
        }

        .gem-card::before {
            content: 'üíé';
        }

        .result-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 16px;
        }

        .result-content {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .item-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.5s ease;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), rgba(200,200,255,0.4));
        }

        .item-image:hover {
            transform: scale(1.05) rotate(5deg);
        }

        .item-details {
            flex: 1;
        }

        .item-name {
            font-size: 1.8rem;
            margin-bottom: 5px;
            background: linear-gradient(90deg, #ff9a9e, #fad0c4);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .item-description {
            font-size: 1rem;
            color: var(--muted);
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .item-properties {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .property {
            background: rgba(124, 77, 255, 0.2);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .property i {
            color: var(--accent);
        }

        .buy-now-btn {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
            margin-top: 10px;
        }

        .buy-now-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(16, 185, 129, 0.3);
        }

        .compatibility-score {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 16px;
            padding: 12px;
            background: linear-gradient(135deg, rgba(209, 250, 229, 0.2) 0%, rgba(167, 243, 208, 0.2) 100%);
            border-radius: 8px;
        }

        .score-label {
            font-weight: 600;
            color: var(--success);
        }

        .score-bar {
            flex: 1;
            height: 8px;
            background: rgba(236, 253, 245, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            background: var(--success);
            transition: width 1s ease;
        }

        .score-value {
            font-weight: 700;
            color: var(--success);
            font-size: 18px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(243, 244, 246, 0.2);
            border-top: 4px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip-text {
            visibility: hidden;
            width: 200px;
            background: #1f2937;
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .error-message {
            color: var(--error);
            font-size: 14px;
            margin-top: 8px;
            display: none;
        }

        footer {
            margin-top: 40px;
            text-align: center;
            color: var(--muted);
            font-size: 0.9rem;
            padding: 20px;
            width: 100%;
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .input-section, .result-section {
                width: 100%;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .result-content {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-gem"></i> Cosmic Harmony Calculator</h1>
            <p class="tagline">Discover your personalized Rudraksha & Gemstone based on your birth energy signature</p>
        </header>

        <div class="app-container">
            <div class="input-section">
                <h2>Your Birth Details</h2>
                <p style="margin-bottom: 20px; color: var(--muted);">Enter your information to discover your personal Rudraksha and Gemstone</p>
                
                <form id="userForm">
                    <div class="form-group">
                        <label for="name"><i class="fas fa-user"></i> Full Name</label>
                        <input type="text" id="name" placeholder="Enter your full name" required />
                        <div id="nameError" class="error-message">Please enter a valid name</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="dob"><i class="fas fa-calendar-alt"></i> Date of Birth</label>
                        <input type="date" id="dob" required />
                        <div id="dobError" class="error-message">Please enter a valid date of birth</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthplace"><i class="fas fa-map-marker-alt"></i> Place of Birth</label>
                        <input type="text" id="birthplace" placeholder="City, Country" required />
                        <div id="placeError" class="error-message">Please enter a valid birth place</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="purpose">
                            Primary Purpose
                            <span class="tooltip">‚ìò
                                <span class="tooltip-text">Select your main intention for wearing Rudraksha and Gemstones</span>
                            </span>
                        </label>
                        <select id="purpose">
                            <option value="GENERAL">General Well-being</option>
                            <option value="WEALTH">Wealth & Prosperity</option>
                            <option value="CAREER">Career Growth</option>
                            <option value="HEALTH">Health & Vitality</option>
                            <option value="EDUCATION">Education & Knowledge</option>
                            <option value="RELATIONSHIPS">Love & Relationships</option>
                            <option value="SPIRITUAL">Spiritual Growth</option>
                            <option value="PROTECTION">Protection & Safety</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="time"><i class="fas fa-clock"></i> Time of Birth (Optional)</label>
                        <input type="time" id="time" />
                    </div>
                    
                    <div class="form-group">
                        <label for="gender">Gender</label>
                        <select id="gender">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn" id="calculate-btn">
                        <i class="fas fa-crystal-ball"></i> Calculate My Cosmic Harmony
                    </button>
                </form>
            </div>

            <div class="result-section">
                <div id="results-container">
                    <div class="results-placeholder">
                        <i class="fas fa-gem"></i>
                        <h3>Your Cosmic Harmony Awaits</h3>
                        <p>Enter your birth details and click the button to discover your Rudraksha and Gemstone</p>
                    </div>
                </div>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p style="margin-top:12px; color:var(--muted)">Analyzing cosmic patterns...</p>
                </div>
            </div>
        </div>

        <footer>
            <p>Cosmic Harmony Calculator &copy; 2023 | Based on Vedic Astrology, Numerology, and Traditional Principles</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const calculateBtn = document.getElementById('calculate-btn');
            const resultsContainer = document.getElementById('results-container');
            const loadingElement = document.getElementById('loading');
            const userForm = document.getElementById('userForm');
            
            // Set max date to today
            const dobInput = document.getElementById('dob');
            const today = new Date().toISOString().split('T')[0];
            dobInput.max = today;
            
            // Sample data for gems and rudrakshas
            const gemsData = {
                // Traditional Birthstones by Month
                traditional: {
                    1: { name: "Garnet", color: "#9A2A2A", icon: "fas fa-gem", properties: ["Protection", "Strength", "Balance"] },
                    2: { name: "Amethyst", color: "#9966CC", icon: "fas fa-gem", properties: ["Wisdom", "Peace", "Spirituality"] },
                    3: { name: "Aquamarine", color: "#7FFFD4", icon: "fas fa-gem", properties: ["Courage", "Serenity", "Clarity"] },
                    4: { name: "Diamond", color: "#FFFFFF", icon: "fas fa-gem", properties: ["Innocence", "Strength", "Purity"] },
                    5: { name: "Emerald", color: "#50C878", icon: "fas fa-gem", properties: ["Love", "Success", "Growth"] },
                    6: { name: "Pearl", color: "#F0F0F0", icon: "fas fa-gem", properties: ["Purity", "Intuition", "Emotional Balance"] },
                    7: { name: "Ruby", color: "#E0115F", icon: "fas fa-gem", properties: ["Passion", "Vitality", "Prosperity"] },
                    8: { name: "Peridot", color: "#B4C424", icon: "fas fa-gem", properties: ["Power", "Influence", "Protection"] },
                    9: { name: "Sapphire", color: "#0F52BA", icon: "fas fa-gem", properties: ["Truth", "Wisdom", "Focus"] },
                    10: { name: "Opal", color: "#A8C3BC", icon: "fas fa-gem", properties: ["Hope", "Creativity", "Inspiration"] },
                    11: { name: "Topaz", color: "#FFC87C", icon: "fas fa-gem", properties: ["Friendship", "Strength", "Manifestation"] },
                    12: { name: "Turquoise", color: "#40E0D0", icon: "fas fa-gem", properties: ["Good Fortune", "Prosperity", "Healing"] }
                },
                // Zodiac Gems
                zodiac: {
                    aries: { name: "Diamond", color: "#FFFFFF", icon: "fas fa-gem", properties: ["Courage", "Strength", "Clarity"] },
                    taurus: { name: "Emerald", color: "#50C878", icon: "fas fa-gem", properties: ["Love", "Patience", "Harmony"] },
                    gemini: { name: "Agate", color: "#B5B8B1", icon: "fas fa-gem", properties: ["Balance", "Communication", "Stability"] },
                    cancer: { name: "Pearl", color: "#F0F0F0", icon: "fas fa-gem", properties: ["Intuition", "Emotional Balance", "Purity"] },
                    leo: { name: "Ruby", color: "#E0115F", icon: "fas fa-gem", properties: ["Passion", "Confidence", "Vitality"] },
                    virgo: { name: "Sapphire", color: "#0F52BA", icon: "fas fa-gem", properties: ["Wisdom", "Truth", "Discipline"] },
                    libra: { name: "Opal", color: "#A8C3BC", icon: "fas fa-gem", properties: ["Balance", "Creativity", "Hope"] },
                    scorpio: { name: "Topaz", color: "#FFC87C", icon: "fas fa-gem", properties: ["Strength", "Transformation", "Energy"] },
                    sagittarius: { name: "Turquoise", color: "#40E0D0", icon: "fas fa-gem", properties: ["Good Fortune", "Adventure", "Protection"] },
                    capricorn: { name: "Garnet", color: "#9A2A2A", icon: "fas fa-gem", properties: ["Strength", "Stability", "Success"] },
                    aquarius: { name: "Amethyst", color: "#9966CC", icon: "fas fa-gem", properties: ["Wisdom", "Spirituality", "Peace"] },
                    pisces: { name: "Aquamarine", color: "#7FFFD4", icon: "fas fa-gem", properties: ["Courage", "Serenity", "Intuition"] }
                }
            };
            
            const rudrakshaData = {
                sun: { 
                    mukhi: 1, 
                    name: 'Surya', 
                    benefits: 'Leadership, confidence, authority',
                    properties: ['Confidence', 'Authority', 'Vitality'],
                    color: '#FF6B35'
                },
                moon: { 
                    mukhi: 2, 
                    name: 'Chandra', 
                    benefits: 'Emotional balance, relationships',
                    properties: ['Emotional Balance', 'Relationships', 'Intuition'],
                    color: '#4ECDC4'
                },
                mars: { 
                    mukhi: 3, 
                    name: 'Mangal', 
                    benefits: 'Energy, courage, vitality',
                    properties: ['Energy', 'Courage', 'Vitality'],
                    color: '#C44569'
                },
                mercury: { 
                    mukhi: 4, 
                    name: 'Budh', 
                    benefits: 'Intelligence, communication',
                    properties: ['Intelligence', 'Communication', 'Business'],
                    color: '#F8C291'
                },
                jupiter: { 
                    mukhi: 5, 
                    name: 'Guru', 
                    benefits: 'Wisdom, prosperity, spirituality',
                    properties: ['Wisdom', 'Prosperity', 'Spirituality'],
                    color: '#546DE5'
                },
                venus: { 
                    mukhi: 6, 
                    name: 'Shukra', 
                    benefits: 'Love, luxury, creativity',
                    properties: ['Love', 'Luxury', 'Creativity'],
                    color: '#E66767'
                },
                saturn: { 
                    mukhi: 7, 
                    name: 'Shani', 
                    benefits: 'Discipline, protection, success',
                    properties: ['Discipline', 'Protection', 'Success'],
                    color: '#786FA6'
                },
                rahu: { 
                    mukhi: 8, 
                    name: 'Rahu', 
                    benefits: 'Obstacle removal, sudden gains',
                    properties: ['Obstacle Removal', 'Sudden Gains', 'Transformation'],
                    color: '#F19066'
                },
                ketu: { 
                    mukhi: 9, 
                    name: 'Ketu', 
                    benefits: 'Spiritual growth, liberation',
                    properties: ['Spiritual Growth', 'Liberation', 'Intuition'],
                    color: '#574B90'
                },
                all: { 
                    mukhi: 10, 
                    name: 'Vishnu', 
                    benefits: 'Overall protection, peace',
                    properties: ['Overall Protection', 'Peace', 'Harmony'],
                    color: '#F78FB3'
                }
            };
            
            // Zodiac signs with date ranges and icons
            const zodiacSigns = [
                { name: "Aries", dates: "Mar 21 - Apr 19", icon: "‚ôà" },
                { name: "Taurus", dates: "Apr 20 - May 20", icon: "‚ôâ" },
                { name: "Gemini", dates: "May 21 - Jun 20", icon: "‚ôä" },
                { name: "Cancer", dates: "Jun 21 - Jul 22", icon: "‚ôã" },
                { name: "Leo", dates: "Jul 23 - Aug 22", icon: "‚ôå" },
                { name: "Virgo", dates: "Aug 23 - Sep 22", icon: "‚ôç" },
                { name: "Libra", dates: "Sep 23 - Oct 22", icon: "‚ôé" },
                { name: "Scorpio", dates: "Oct 23 - Nov 21", icon: "‚ôè" },
                { name: "Sagittarius", dates: "Nov 22 - Dec 21", icon: "‚ôê" },
                { name: "Capricorn", dates: "Dec 22 - Jan 19", icon: "‚ôë" },
                { name: "Aquarius", dates: "Jan 20 - Feb 18", icon: "‚ôí" },
                { name: "Pisces", dates: "Feb 19 - Mar 20", icon: "‚ôì" }
            ];
            
            // Calculate zodiac sign based on date
            function getZodiacSign(month, day) {
                const signs = [
                    { name: "Capricorn", start: { month: 0, day: 1 }, end: { month: 0, day: 19 } },
                    { name: "Aquarius", start: { month: 0, day: 20 }, end: { month: 1, day: 18 } },
                    { name: "Pisces", start: { month: 1, day: 19 }, end: { month: 2, day: 20 } },
                    { name: "Aries", start: { month: 2, day: 21 }, end: { month: 3, day: 19 } },
                    { name: "Taurus", start: { month: 3, day: 20 }, end: { month: 4, day: 20 } },
                    { name: "Gemini", start: { month: 4, day: 21 }, end: { month: 5, day: 20 } },
                    { name: "Cancer", start: { month: 5, day: 21 }, end: { month: 6, day: 22 } },
                    { name: "Leo", start: { month: 6, day: 23 }, end: { month: 7, day: 22 } },
                    { name: "Virgo", start: { month: 7, day: 23 }, end: { month: 8, day: 22 } },
                    { name: "Libra", start: { month: 8, day: 23 }, end: { month: 9, day: 22 } },
                    { name: "Scorpio", start: { month: 9, day: 23 }, end: { month: 10, day: 21 } },
                    { name: "Sagittarius", start: { month: 10, day: 22 }, end: { month: 11, day: 21 } },
                    { name: "Capricorn", start: { month: 11, day: 22 }, end: { month: 11, day: 31 } }
                ];
                
                for (const sign of signs) {
                    const startDate = new Date(2000, sign.start.month, sign.start.day);
                    const endDate = new Date(2000, sign.end.month, sign.end.day);
                    const birthDate = new Date(2000, month, day);
                    
                    if (birthDate >= startDate && birthDate <= endDate) {
                        return sign.name.toLowerCase();
                    }
                }
                
                return "capricorn"; // Default fallback
            }
            
            // Form validation
            function validateForm() {
                let isValid = true;
                const name = document.getElementById('name').value.trim();
                const dob = document.getElementById('dob').value;
                const birthplace = document.getElementById('birthplace').value.trim();
                
                // Reset error messages
                document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');
                
                if (!name || !/^[a-zA-Z\s]+$/.test(name)) {
                    document.getElementById('nameError').style.display = 'block';
                    isValid = false;
                }
                
                if (!dob || new Date(dob) > new Date()) {
                    document.getElementById('dobError').style.display = 'block';
                    isValid = false;
                }
                
                if (!birthplace) {
                    document.getElementById('placeError').style.display = 'block';
                    isValid = false;
                }
                
                return isValid;
            }
            
            // Calculate Life Path Number
            function calculateLifePathNumber(dob) {
                const digits = dob.replace(/-/g, '').split('').map(Number);
                let sum = digits.reduce((a, b) => a + b, 0);
                while (sum > 9 && sum !== 11 && sum !== 22) {
                    sum = sum.toString().split('').map(Number).reduce((a, b) => a + b, 0);
                }
                return sum;
            }
            
            // Calculate Name Number
            function calculateNameNumber(name) {
                const letterValues = {
                    A:1, B:2, C:3, D:4, E:5, F:6, G:7, H:8, I:9,
                    J:1, K:2, L:3, M:4, N:5, O:6, P:7, Q:8, R:9,
                    S:1, T:2, U:3, V:4, W:5, X:6, Y:7, Z:8
                };
                const sum = name.toUpperCase().replace(/[^A-Z]/g, '').split('')
                    .reduce((acc, letter) => acc + (letterValues[letter] || 0), 0);
                return (sum % 9) || 9;
            }
            
            // Get planet by purpose
            function getPlanetByPurpose(purpose) {
                const purposeMap = {
                    GENERAL: 'all',
                    WEALTH: 'jupiter',
                    CAREER: 'sun',
                    HEALTH: 'mars',
                    EDUCATION: 'mercury',
                    RELATIONSHIPS: 'venus',
                    SPIRITUAL: 'ketu',
                    PROTECTION: 'saturn'
                };
                return purposeMap[purpose] || 'all';
            }
            
            // Calculate compatibility score
            function calculateCompatibility(user, itemType) {
                const baseScore = 85;
                const nameScore = Math.min(calculateNameNumber(user.name), 10);
                const timeScore = user.time ? 5 : 0;
                return Math.min(95, baseScore + nameScore + timeScore);
            }
            
            // Generate personalized gem based on user data
            function calculatePersonalGem(user) {
                const birthDate = new Date(user.dob);
                const month = birthDate.getMonth() + 1; // Months are 0-indexed
                const day = birthDate.getDate();
                
                // Get traditional birthstone based on month
                const traditionalGem = gemsData.traditional[month];
                
                // Get zodiac gem based on birth date
                const zodiacSign = getZodiacSign(birthDate.getMonth(), day);
                const zodiacGem = gemsData.zodiac[zodiacSign];
                
                // For this demo, we'll prioritize the zodiac gem
                const selectedGem = zodiacGem;
                
                // Create a personalized description
                const descriptions = [
                    `Based on your birth details, ${selectedGem.name} is your celestial gemstone. This crystal resonates with your unique energy signature and can help amplify your natural strengths.`,
                    `Your cosmic alignment points to ${selectedGem.name} as your personal gem. This stone connects with your innate qualities and can bring balance to your life.`,
                    `The stars reveal ${selectedGem.name} as your destined gem. This crystal harmonizes with your birth energy and can enhance your personal journey.`
                ];
                
                const randomDescription = descriptions[Math.floor(Math.random() * descriptions.length)];
                
                return {
                    name: selectedGem.name,
                    color: selectedGem.color,
                    icon: selectedGem.icon,
                    properties: selectedGem.properties,
                    description: randomDescription,
                    zodiac: zodiacSign.charAt(0).toUpperCase() + zodiacSign.slice(1),
                    traditional: traditionalGem.name,
                    compatibility: calculateCompatibility(user, 'gem')
                };
            }
            
            // Generate personalized rudraksha based on user data
            function calculatePersonalRudraksha(user) {
                const lifePathNumber = calculateLifePathNumber(user.dob);
                const nameNumber = calculateNameNumber(user.name);
                
                // Purpose-based selection
                let planet = getPlanetByPurpose(user.purpose);
                
                // Simple algorithm to select rudraksha based on life path and name number
                const planetKeys = Object.keys(rudrakshaData);
                const selectedPlanetKey = planetKeys[(lifePathNumber + nameNumber) % planetKeys.length];
                const selectedRudraksha = rudrakshaData[selectedPlanetKey];
                
                // Create a personalized description
                const descriptions = [
                    `The ${selectedRudraksha.mukhi} Mukhi Rudraksha is perfectly aligned with your energy. It connects you with ${selectedRudraksha.name} and enhances ${selectedRudraksha.benefits.toLowerCase()}.`,
                    `Your spiritual path is harmonized with the ${selectedRudraksha.mukhi} Mukhi Rudraksha. This sacred bead brings the blessings of ${selectedRudraksha.name} into your life.`,
                    `The cosmic calculation reveals the ${selectedRudraksha.mukhi} Mukhi Rudraksha as your spiritual companion. It resonates with ${selectedRudraksha.name} energy for ${selectedRudraksha.benefits.toLowerCase()}.`
                ];
                
                const randomDescription = descriptions[Math.floor(Math.random() * descriptions.length)];
                
                return {
                    mukhi: selectedRudraksha.mukhi,
                    name: selectedRudraksha.name,
                    color: selectedRudraksha.color,
                    icon: "fas fa-pray",
                    properties: selectedRudraksha.properties,
                    description: randomDescription,
                    benefits: selectedRudraksha.benefits,
                    compatibility: calculateCompatibility(user, 'rudraksha')
                };
            }
            
            // Display results
            function displayResults(gem, rudraksha, userData) {
                const { name, dob, birthplace } = userData;
                const birthDate = new Date(dob);
                const month = birthDate.toLocaleString('default', { month: 'long' });
                const zodiacSign = gem.zodiac;
                
                resultsContainer.innerHTML = `
                    <div class="result-card">
                        <h3 class="result-title">Your Recommended Rudraksha</h3>
                        <div class="result-content">
                            <div class="item-image" style="background: radial-gradient(circle at 30% 30%, ${rudraksha.color}99, ${rudraksha.color}40); border: 2px solid ${rudraksha.color}80;">
                                <i class="${rudraksha.icon}" style="color: ${rudraksha.color}; text-shadow: 0 0 20px ${rudraksha.color}80;"></i>
                            </div>
                            <div class="item-details">
                                <h2 class="item-name">${rudraksha.mukhi} Mukhi Rudraksha</h2>
                                <p class="item-description">${rudraksha.description}</p>
                                <div class="item-properties">
                                    ${rudraksha.properties.map(prop => `
                                        <div class="property">
                                            <i class="fas fa-check-circle"></i>
                                            <span>${prop}</span>
                                        </div>
                                    `).join('')}
                                </div>
                                <a href="#" class="buy-now-btn">Buy This Rudraksha</a>
                            </div>
                        </div>
                        <div class="compatibility-score">
                            <span class="score-label">Compatibility:</span>
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${rudraksha.compatibility}%"></div>
                            </div>
                            <span class="score-value">${rudraksha.compatibility}%</span>
                        </div>
                    </div>
                    
                    <div class="result-card gem-card">
                        <h3 class="result-title">Your Recommended Gemstone</h3>
                        <div class="result-content">
                            <div class="item-image" style="background: radial-gradient(circle at 30% 30%, ${gem.color}99, ${gem.color}40); border: 2px solid ${gem.color}80;">
                                <i class="${gem.icon}" style="color: ${gem.color}; text-shadow: 0 0 20px ${gem.color}80;"></i>
                            </div>
                            <div class="item-details">
                                <h2 class="item-name">${gem.name}</h2>
                                <p class="item-description">${gem.description}</p>
                                <div class="item-properties">
                                    ${gem.properties.map(prop => `
                                        <div class="property">
                                            <i class="fas fa-check-circle"></i>
                                            <span>${prop}</span>
                                        </div>
                                    `).join('')}
                                </div>
                                <a href="#" class="buy-now-btn">Buy This Gemstone</a>
                            </div>
                        </div>
                        <div class="compatibility-score">
                            <span class="score-label">Compatibility:</span>
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${gem.compatibility}%"></div>
                            </div>
                            <span class="score-value">${gem.compatibility}%</span>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <h3 class="result-title">Your Cosmic Profile</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
                            <div class="info-item">
                                <div class="info-label">Zodiac Sign</div>
                                <div class="info-value">${gem.zodiac}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Birth Month</div>
                                <div class="info-value">${month}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Life Path Number</div>
                                <div class="info-value">${calculateLifePathNumber(dob)}</div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // Handle form submission
            userForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!validateForm()) {
                    return;
                }
                
                // Collect form data
                const userData = {
                    name: document.getElementById('name').value.trim(),
                    dob: document.getElementById('dob').value,
                    birthplace: document.getElementById('birthplace').value.trim(),
                    purpose: document.getElementById('purpose').value,
                    time: document.getElementById('time').value,
                    gender: document.getElementById('gender').value
                };
                
                // Show loading state
                resultsContainer.style.display = 'none';
                loadingElement.classList.add('active');
                
                // Simulate calculation delay
                setTimeout(() => {
                    const personalGem = calculatePersonalGem(userData);
                    const personalRudraksha = calculatePersonalRudraksha(userData);
                    
                    loadingElement.classList.remove('active');
                    resultsContainer.style.display = 'block';
                    displayResults(personalGem, personalRudraksha, userData);
                }, 2000);
            });
            
            // Add some sample data for demo purposes
           
        });
    </script>
</body>
</html>

